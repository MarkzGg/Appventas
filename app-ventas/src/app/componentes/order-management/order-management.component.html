<div class="orders-container">
  <h2>Gestión de Pedidos (Administrador)</h2>

  <div *ngIf="mensaje" [class]="mensajeTipo === 'exito' ? 'mensaje-exito' : 'mensaje-error'">
    {{ mensaje }}
  </div>

  <div *ngIf="pedidos.length === 0 && !mensaje" class="no-orders-message">
    <p>No hay pedidos registrados en el sistema.</p>
  </div>

  <div *ngIf="pedidos.length > 0" class="table-responsive">
    <table>
      <thead>
        <tr>
          <th>N° Boleta</th>
          <th>Fecha Emisión</th>
          <th>Cliente</th>
          <th>Subtotal</th>
          <th>IGV</th>
          <th>Total</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pedido of pedidos">
          <td>{{ pedido.numeroBoleta }}</td>
          <td>{{ pedido.fechaEmision | date:'dd/MM/yyyy HH:mm' }}</td>
          <td>{{ pedido.usuario?.username || 'N/A' }}</td>
          <td>S/ {{ pedido.subtotal | number:'1.2-2' }}</td>
          <td>S/ {{ pedido.igv | number:'1.2-2' }}</td>
          <td>S/ {{ pedido.total | number:'1.2-2' }}</td>
          <td>
            <button class="view-details-btn" (click)="openDetailModal(pedido)">Ver Detalles</button>
            <button class="download-pdf-btn" (click)="descargarPdf(pedido.id)">Descargar PDF</button>
            <button class="delete-btn" (click)="eliminarBoleta(pedido.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>


<app-order-detail-modal
  *ngIf="showDetailModal && selectedPedido"
  [pedido]="selectedPedido"
  [onClose]="cerrarModalDetalle"
></app-order-detail-modal>

<div *ngIf="pedidos.length === 0 && !mensaje" class="no-orders-message"></div>
