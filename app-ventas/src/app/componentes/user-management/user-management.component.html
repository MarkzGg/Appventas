<h2>Gesti√≥n de Usuarios</h2>

<div *ngIf="mensaje" class="mensaje" [ngClass]="{'exito': mensajeTipo === 'exito', 'error': mensajeTipo === 'error'}">
  {{ mensaje }}
</div>

<button (click)="mostrarFormularioNuevoUsuario()">Nuevo Usuario</button>

<app-create-user-modal
  [visible]="showCreateUserModal"
  (close)="onCloseCreateUserModal()"
  (userCreated)="onUserCreated($event)">
</app-create-user-modal>

<app-edit-user-modal
  [visible]="showEditUserModal"
  [usuarioOriginal]="selectedUser" (close)="onCloseEditUserModal()"
  (userEdited)="onUserEdited($event)">
</app-edit-user-modal>


<table *ngIf="usuarios.length > 0">
    <thead>
        <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let user of usuarios">
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.nombre || 'N/A' }}</td>
            <td>{{ user.role }}</td>
            <td>
                <button (click)="editarUsuario(user.id!)">Editar</button>
                <button (click)="eliminarUsuario(user.id!)" style="background-color: #dc3545;">Eliminar</button>
            </td>
        </tr>
    </tbody>
</table>

<p *ngIf="usuarios.length === 0">No hay usuarios registrados.</p>
